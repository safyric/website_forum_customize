<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <template id="website_forum.header_inherit" inherit_id="website_forum.header">
            <xpath expr="//ul[@class='nav navbar-nav']" position="replace">
                <ul class="nav navbar-nav">
                    <li t-att-class="sorting == 'relevancy desc' and 'active' or None ">
                        <a t-attf-href="/forum/#{ slug(forum) }?{{ keep_query( 'search', 'post_type', 'filters', sorting='relevancy desc') }}">Trending</a>
                    </li>
                    <li t-att-class="sorting == 'create_date desc' and 'active' or None ">
                        <a t-attf-href="/forum/#{ slug(forum) }?{{ keep_query( 'search', 'post_type', 'filters', sorting='create_date desc') }}">Newest</a>
                    </li>
                    <!--<li t-att-class="searches.get('users') and 'active' or None ">
                        <a t-attf-href="/forum/#{ slug(forum) }/users">People</a>
                    </li>-->
                    <li t-att-class="searches.get('tags') and 'active' or None ">
                        <a t-attf-href="/forum/#{ slug(forum) }/tag">Tags</a>
                    </li>
                    <!--<li t-att-class="searches.get('badges') and 'active' or None ">
                        <a t-attf-href="/forum/#{ slug(forum) }/badge">Badges</a>
                    </li>-->
                </ul>
            </xpath>
            <xpath expr="//a[@type='button']" position="replace">
                <t t-if="user.karma>=forum.karma_moderate">New Post</t>
            </xpath>
            <xpath expr="//div[@id='right-column']/div[5]" position="attributes">
                <attribute name="t-if">user.karma>=forum.karma_moderate</attribute>
            </xpath>
        </template>

        <template id="website_forum.forum_index_inherit" inherit_id="website_forum.forum_index">
            <xpath expr="//h2[@class='page-header mt0']" position="replace">
                <t t-esc="question_count"/>
                    <span> Records </span>
                    <!--<span t-if="post_type not in ('link','question','discussion')"> Posts </span>
                    <span t-if="post_type == 'question'"> Question</span>
                    <span t-if="post_type == 'link'"> Links</span>
                    <span t-if="post_type == 'discussion'"> Threads</span>-->
                <t t-esc="search"/>
                <small class="dropdown" t-if="filters in ('all', 'unanswered','followed', 'tag')">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <!--<t t-if="filters == 'unanswered'"> Unanswered</t>-->
                        <t t-if="filters == 'followed'"> Followed</t>
                        <t t-if="tag"> <span t-field="tag.name"/></t>
                        <t t-if="sorting == 'relevancy desc'"> by relevance</t>
                        <t t-if="sorting == 'write_date desc'"> by date</t>
                        <t t-if="sorting == 'create_date desc'"> by newest</t>
                        <!--<t t-if="sorting == 'child_count desc'"> by most answered</t>
                        <t t-if="sorting == 'vote_count desc'"> by most voted</t>-->
                        <b class="caret"/>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Filter on</li>
                        <li t-att-class="filters == 'all' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'sorting', filters='all')">All</a>
                        </li>
                        <!--<li t-att-class="filters == 'unanswered' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'sorting', filters='unanswered')">Unanswered</a>
                        </li>-->
                        <li t-if="uid" t-att-class="filters == 'followed' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'sorting', filters='followed')">Followed</a>
                        </li>
                        <li t-if="tag" class="dropdown-header">Tags</li>
                        <li t-if="tag" t-att-class="tag and 'active' or None ">
                            <a href=""><t t-esc="tag.name"/></a>
                        </li>
                        <li class="dropdown-header">Sort by</li>
                        <li t-att-class="sorting == 'relevancy desc' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'filters', sorting='relevancy desc')">Relevance</a>
                        </li>
                        <!--<li t-att-class="sorting == 'write_date desc' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'filters', sorting='write_date desc')">Last activity date</a>
                        </li>-->
                        <li t-att-class="sorting == 'create_date desc' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'filters', sorting='create_date desc')">Newest</a>
                        </li>
                        <!--<li t-att-class="sorting == 'child_count desc' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'filters', sorting='child_count desc')">Most answered</a>
                        </li>
                        <li t-att-class="sorting == 'vote_count desc' and 'active' or None ">
                            <a t-att-href="url_for('') + '?' + keep_query( 'search', 'filters', sorting='vote_count desc')">Most voted</a>
                        </li>-->
                    </ul>
                </small>
            </xpath>
        </template>
        <template id="website_forum.post_description_full_inherit" inherit_id="website_forum.post_description_full">
            <xpath  expr="//ul[@class='pull-right list-inline mb0']" position="attributes">
                <attribute name="t-if">not is_public_user</attribute>
            </xpath>
            <xpath expr="//div[@class='clearfix']/ul[2]/li[1]" position="replace"/>
        </template>
    </data>
</odoo>
